触发器是用户用户定义在关系表上的一类由事件驱动的数据库对象，也是一种保证数据完整性的方法。触发器一旦定义，无须用户调用，任何对表的修改操作均为数据库服务器自动激活相应的触发器。
触发器与表的关系十分密切，其主要作用是实现主键和外键不能保证的复杂的参照完整性和数据的一致性，从而有效地保护表中的数据。

# 1 创建触发器
常用的语法格式是：
create trigger trigger_name trigger_time trigger_event on tbl_name for each row trigger_body;
语法项解释：
1. trigger_name用于指定触发器的名称，触发器在当前数据库中必须具有唯一的名称。如果要在某个特定数据库中创建，名称前面应该加上数据库的名称；
2. trigger_time用于指定触发器被触发的时刻，它有两个选项，即关键字before和after，用于表示触发器是在激活它的语句之前或之后触发，如果希望验证新数据是否满足使用的限制，则使用before选项；如果希望在激活触发器的语句执行之后完成几个或更多的改变，通常使用after选项；
3. trigger_event用于指定触发事件，即指定激活触发的语句的种类，可以是下述值之一：insert、update、delete；
4. tbl_name用于指定与触发器相关联的表名，必须引用永久性表，不能将触发器与临时表或视图关联起来，且同一个表不能拥有两个具有相同触发时刻和事件的触发器；
5. for each row用于指定对于受触发器事件影响的每一行都要激活触发器的动作；
6. trigger_body用于指定触发器动作主题，即包含触发器激活时将要执行的MySQL语句。如果要执行多个语句，可使用begin...end复合语句结构；

# 2 删除触发器
常用的语法格式是：
drop trigger [if exists] [chema_name] trigger_name;
1. if exists用于避免在没有触发器的情况下删除触发器；
2. schema_name用于指定触发器所在的数据库的名称，若没有指定，则为当前默认数据库；
3. trigger_name指定要删除的触发器的名称；

# 3 使用触发器
## 1 insert触发器
insert触发器可在insert语句执行之前或之后执行。使用该触发器时，需要注意以下几点：
1. 在insert触发器代码内，可引用一个名为new的虚拟表，来访问被插入的行；
2. 在before insert触发器中，new中的值也可以被更新，即允许更改被插入的值；
3. 对于auto_increment列，new在insert执行之前包含的是0值，在insert执行之后将包含新的自动生成值；

## 2 delete触发器
delete触发器可在delete语句执行之前或之后执行。使用该触发器时，需要注意以下几点：
1. 在delete触发器代码中，可以引用一个名为old的虚拟表，来访问被删除行的值；
2. old中值全部都是只读的，不能被更新；

## 3 update触发器
update触发器可在update语句执行之前或之后执行。使用该触发器时，需要注意以下几点：
1. 在update触发器代码之内，可以引用一个名为old的虚拟表访问以前的值，也可以引用一个名为new的虚拟表来访问新更新的值；
2. 在before update触发器中，new中的值可以被更新，即允许更改将要用于update语句中的值；
3. old中的值全部是只读，不能被更新；
4. 当触发器涉及对触发器表自身的更新操作时，只能使用before update触发器，而after update触发器将不被允许；